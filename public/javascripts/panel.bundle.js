!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="./public/",e(0)}([function(t,e,n){n(7).Listener.init()},,,,,,,function(t,e,n){var o=function(){var t=n(8).Data,e=n(9).Dom,o=function(){t.getUncheckedQuestion(function(t){t&&t.code&&t.code>0&&e.renderQuestion(t.data)})},r=function(n){t.getQuestionById(n,function(t){t&&t.code&&t.code>0&&(t.data.length?e.renderQuestion(t.data):e.showAlert({title:"错误",body:"该qid不存在"}))})},i=function(){$("#retrive").click(function(){var t=$("#qid").val();t&&parseInt(t)&&(location.href="/panel?qid="+t)})},a=function(){var n=function(t){var e=/select|update|delete|exec|count|’|;/i;return!e.test(t)},r=function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};$(".submit-button").click(function(){var i="pass"==$(this).attr("id")?1:2,a=r($("#question").val()).trim(),u=r($("#answer0").val()).trim(),s=r($("#answer1").val()).trim(),l=r($("#answer2").val()).trim(),d=r($("#answer3").val()).trim(),c=r($("#uploader").val()).trim(),f=parseInt($("#question_id").html());return n(a)?n(u)?n(s)?n(l)?n(d)?n(c)?f&&0!=a.length&&0!=u.length&&0!=s.length&&0!=l.length&&0!=d.length?void t.updateQuestion({question:a,answer0:u,answer1:s,answer2:l,answer3:d,uploader:c,status:i,qid:f},function(t){t&&t.code&&t.code>0?(e.showAlert({title:"提交成功！",body:"提交成功！"}),o()):e.showAlert({title:"提交失败！",body:t.info})}):void e.showAlert({title:"提交失败！",body:"!qid || question.length == 0 || answer0.length == 0 || answer1.length == 0 || answer2.length == 0 || answer3.length == 0"}):void e.showAlert({title:"提交失败！",body:"出题人中不可以有奇怪的单词和字符！"}):void e.showAlert({title:"提交失败！",body:"错误答案3中不可以有奇怪的单词和字符！"}):void e.showAlert({title:"提交失败！",body:"错误答案2中不可以有奇怪的单词和字符！"}):void e.showAlert({title:"提交失败！",body:"错误答案1中不可以有奇怪的单词和字符！"}):void e.showAlert({title:"提交失败！",body:"正确答案中不可以有奇怪的单词和字符！"}):void e.showAlert({title:"提交失败！",body:"题干中不可以有奇怪的单词和字符！"})})},u=function(){function t(t){var e=t.indexOf("=");return e==-1?t:t.substring(0,e)}function e(t){var e=t.indexOf("=");return e==-1?"":t.substring(e+1)}var n=function(n){var o=document.location.href,r=o.indexOf("?")+1;if(0==r)return"";for(var i="",a=o.substring(r),u=a.split("&"),s=0;s<u.length;s++)n==t(u[s])&&(i=e(u[s]));return i};i(),n("qid")&&parseInt(n("qid"))?r(n("qid")):o(),a()};return{init:u}}();e.Listener=o},function(t,e){var n=function(){var t=function(t){var e={};$.ajax({url:"/private_api/get_unchecked_question",type:"POST",success:function(t){t&&(e=t)},error:function(t){e.code="-99999",e.info="获取未审核的问题时服务端发生错误",e.data=t},complete:function(){t&&"function"==typeof t&&t(e)}})},e=function(t,e){var n={};$.ajax({url:"/private_api/get_question_by_id",type:"POST",data:{qid:t},success:function(t){t&&(n=t)},error:function(t){n.code="-99999",n.info="根据qid获取的问题时服务端发生错误",n.data=t},complete:function(){e&&"function"==typeof e&&e(n)}})},n=function(t,e){var n={};$.ajax({url:"/private_api/update_question",type:"POST",data:{question:t.question||"题目内容",answer0:t.answer0||"正确答案",answer1:t.answer1||"-",answer2:t.answer2||"-",answer3:t.answer3||"-",uploader:t.uploader||"walking shadow",qid:t.qid,status:t.status},success:function(t){t&&(n=t)},error:function(t){n.code="-99999",n.info="根据qid获取的问题时服务端发生错误",n.data=t},complete:function(){e&&"function"==typeof e&&e(n)}})};return{getUncheckedQuestion:t,getQuestionById:e,updateQuestion:n}}();e.Data=n},function(t,e){var n=function(){var t=function(t,e){var n=$("#modal");n.find(".modal-dialog").removeClass("modal-sm").removeClass("modal-lg").addClass("modal-sm"),$("#modal_title").html(t.title||"警告"),$("#modal_body").html(t.body||"发生错误"),e&&"function"==typeof e&&$(".close-function-trigger").unbind("click").click(function(){e()}),n.modal()},e=function(t){var e=function(t){return t.replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};return 0==t.length?void $("#question_id").html("N/A 没有未审核的题目"):($("#question").val(e(t[0].question||"-")),$("#answer0").val(e(t[0].answer0||"-")),$("#answer1").val(e(t[0].answer1||"-")),$("#answer2").val(e(t[0].answer2||"-")),$("#answer3").val(e(t[0].answer3||"-")),$("#uploader").val(e(t[0].uploader||"-")),void $("#question_id").html(t[0].qid))};return{showAlert:t,renderQuestion:e}}();e.Dom=n}]);