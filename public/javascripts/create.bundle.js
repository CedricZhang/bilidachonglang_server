!function(t){function e(n){if(o[n])return o[n].exports;var a=o[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var o={};return e.m=t,e.c=o,e.p="./public/",e(0)}([function(t,e,o){o(1).Listener.init()},function(t,e,o){var n=function(){var t=o(2).Dom,e=o(3).Data,n=function(){var o=function(t){var e=/select|update|delete|exec|count|’|;/i;return!e.test(t)},n=function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};$("#submit").click(function(){var a=n($("#question").val()).trim(),r=n($("#answer0").val()).trim(),i=n($("#answer1").val()).trim(),l=n($("#answer2").val()).trim(),u=n($("#answer3").val()).trim(),s=n($("#uploader").val()).trim();return o(a)?o(r)?o(i)?o(l)?o(u)?o(s)?0==a.length||0==r.length||0==i.length||0==l.length||0==u.length?void t.showAlert({title:"提交失败！",body:"请将题目内容和四个答案填写完整！"}):void e.upload({question:a,answer0:r,answer1:i,answer2:l,answer3:u,uploader:s,status:status},function(e){e&&e.code&&e.code>0?t.showAlert({title:"提交成功！",body:"问题提交成功，问题ID："+(e.data.qid||"未知")+"，请等待审核。"},function(){location.reload()}):t.showAlert({title:"提交失败！",body:e.info})}):void t.showAlert({title:"提交失败！",body:"出题人中不可以有奇怪的单词和字符！"}):void t.showAlert({title:"提交失败！",body:"错误答案3中不可以有奇怪的单词和字符！"}):void t.showAlert({title:"提交失败！",body:"错误答案2中不可以有奇怪的单词和字符！"}):void t.showAlert({title:"提交失败！",body:"错误答案1中不可以有奇怪的单词和字符！"}):void t.showAlert({title:"提交失败！",body:"正确答案中不可以有奇怪的单词和字符！"}):void t.showAlert({title:"提交失败！",body:"题干中不可以有奇怪的单词和字符！"})})},a=function(){$("#question").bind("input propertychange",function(){$("#question_count").html($(this).val().length)})},r=function(){n(),a(),e.queryAmount(function(e){e&&e.code&&e.code>0?t.setQuestionAmount({toBeChecked:e.data[0]||0,normal:e.data[1]||0,shit:e.data[2]||0}):t.showAlert({title:"查询题库数量失败！",body:e.info})})};return{init:r}}();e.Listener=n},function(t,e){var o=function(){var t=function(t,e){var o=$("#modal");o.find(".modal-dialog").removeClass("modal-sm").removeClass("modal-lg").addClass("modal-sm"),$("#modal_title").html(t.title||"警告"),$("#modal_body").html(t.body||"发生错误"),e&&"function"==typeof e&&$(".close-function-trigger").unbind("click").click(function(){e()}),o.modal()},e=function(t){var e=t.toBeChecked,o=t.normal,n=t.shit,a=e+o+n,r="当前题库中共有 "+a+" 道题，其中一般问题 "+o+" 道，待审核问题 "+e+" 道，废题 "+n+" 道。";$("#question_amount").html(r)};return{showAlert:t,setQuestionAmount:e}}();e.Dom=o},function(t,e){var o=function(){var t=function(t,e){var o={};$.ajax({url:"/api/create",type:"POST",data:{question:t.question||"题目内容",answer0:t.answer0||"正确答案",answer1:t.answer1||"-",answer2:t.answer2||"-",answer3:t.answer3||"-",uploader:t.uploader||"walking shadow"},success:function(t){t&&(o=t)},error:function(t){o.code="-99999",o.info="提交问题时服务端发生错误",o.data=t},complete:function(){e&&"function"==typeof e&&e(o)}})},e=function(t){var e={};$.ajax({url:"/api/query_amount",type:"POST",success:function(t){t&&(e=t)},error:function(t){e.code="-99999",e.info="查询问题数量时服务端发生错误",e.data=t},complete:function(){t&&"function"==typeof t&&t(e)}})};return{upload:t,queryAmount:e}}();e.Data=o}]);